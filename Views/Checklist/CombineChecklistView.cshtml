@model IPagedList<KJCFRubberRoller.Models.RubberRoller>
@using PagedList;
@using PagedList.Mvc;
@using KJCFRubberRoller.Models;

@{
    ViewBag.Title = "CombineChecklistView";
    Layout = "~/Views/Shared/_Layout.cshtml"; 
}


<div class="container">
    <div class="row mb-4">
        <div class="mx-auto">
            <div class="py-2 bg-kjcf">
                <h2 class="text-white text-center">Before and After Operation Checklist</h2>
            </div>
            <div class="bg-white container py-3">
                @Html.ActionLink("Add New Before and After Checklist", "Create", null, new { @class = "btn btn-block btn-primary" })
                <br />
                @Html.Label("Search:")
                @Html.TextBox("Search", "", htmlAttributes: new { @class = "form-control before_roller_issue_checklist_search", placeholder = "Search roller category here..." })
                <br />
                <table class="table table-responsive table-hover table-striped sortable">
                    <tr class="text-center">
                        <th rowspan="9">
                            No.
                        </th>
                        <th rowspan="9">
                            Date / Time
                        </th>
                        <th rowspan="9">
                            Roller ID
                        </th>
                        <th rowspan="9">
                            Prepared By
                        </th>
                        <th rowspan="9">
                            Verified By
                        </th>
                        <th rowspan="9">
                            Before Operation
                        </th>
                        <th rowspan="9">
                            After Operation
                        </th>
                        <th>
                        </th>
                    </tr>
                    <tr>
                        <th rowspan="2">
                           Roller SH 
                        </th>
                        <th rowspan="2">
                            Roller Roundness
                        </th>
                        <th rowspan="2">
                            Hubs Condition
                        </th>
                        <th rowspan="2">
                            Nut Used
                        </th>
                        <th rowspan="2">
                            Roller Appearance
                        </th>
                        <th colspan="3">
                            Sent to
                        </th>
                        <th rowspan="2">
                           Remarks
                        </th>
                    </tr>


                    @foreach (var item in Model.Select((value, index) => new { value, index }))
                    {
                <tr class="text-center">
                    <td>
                        @(item.index + 1)
                    </td>
                    <td class="text-left">
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().dateTime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().rollerID)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().preparedBy)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().verifiedBy)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().rollerSH)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().rollerRoundness)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().hubsCondition)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.BeforeRollerIssueChecklists.First().nutUsed)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.AfterRollerProductionChecklists.First().rollerAppearance)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.AfterRollerProductionChecklists.First().rollerSendTo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.value.AfterRollerProductionChecklists.First().remarks)
                    </td>
                    <td>
                        @Html.ActionLink("Roller return", "ShowAfterChecklist", new { id = item.value.rollerID }, new { @class = "btn btn-block btn-success" })
                    </td>
                    <td>
                        @Html.ActionLink("Edit Details", "Edit", new { id = item.value.rollerID }, new { @class = "btn btn-block btn-success" })
                    </td>
                </tr>
                    }
                </table>
               
            </div>
        </div>
    </div>
</div>

